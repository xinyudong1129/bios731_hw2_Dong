# BIOS 731 HW2 â€“ Simulation study (Bootstrap Confidence intervals)

Author: Xinyu Dong

## Folder structure (in general)

-   `analysis/` : final reproducible report (`.rmd`)
-   `source/` : master scripts to execute the full simulation study
-   `simulations/` : step-by-step scripts and reusable functions to complete the simulation and provide visualization and tabular results
-   `data/` : saved intermediate results (scenario-wise `.rds` and combined `.rds`)
-   `figures/` : visualization plots saved for this report

## Zooming in on the functionality of the files:
## Project Structure

This repository is organized to support a fully reproducible Monte Carlo simulation study, with clear separation between core functions, simulation drivers, generated results, figures, and the final report.

- `analysis/` : Final reproducible report and knitted outputs  
  - Contains the main R Markdown file (`final_report_hw2_Xinyu_Dong.Rmd`) that loads saved results from `data/`, sources plotting utilities from `source/`, and produces all tables, figures, and written interpretations.  
  - The knitted PDF/HTML output of the report is also stored here.  
  - Any intermediate files generated by knitting (e.g., `_files/` folders) are auto-created by R Markdown and not part of the core analysis workflow.

- `source/` : Master scripts and reusable plotting/summarization utilities  
  - Contains scripts with reusable functions for summarizing simulation results, computing performance metrics (bias, coverage, SE distributions, computation time), and generating publication-quality plots.  
  - These scripts are sourced by the final report to ensure all results and figures are generated in a reproducible manner without duplicating code.  
  - Example contents include plotting functions (`make_plots.R`) and result summarization helpers (`summarize_results.R`).

- `simulations/` : Step-by-step simulation code and data-generating mechanisms  
  - Contains the core functions for data generation, model fitting, and confidence interval construction (Wald, bootstrap percentile, bootstrap-$t$).  
  - Includes scripts that define the Monte Carlo replication logic for a single scenario as well as wrappers for running full factorial simulation designs.  
  - These scripts are used by the master simulation driver in `source/` to generate scenario-wise and combined results.

- `data/` : Saved simulation outputs (intermediate and combined results)  
  - Stores scenario-wise simulation results as `.rds` files for each combination of sample size, true treatment effect, and error distribution.  
  - Contains the combined results file (e.g., `combined_results.rds`) aggregating all scenarios and Monte Carlo replications.  
  - These saved objects allow the final report to be rendered without re-running the full simulation study.

- `figures/` : Saved visualization outputs  
  - Contains all plots generated for the final report (e.g., coverage, bias, SE distributions, and computation time comparisons).  
  - Figures are saved in high-resolution formats (e.g., `.png` or `.pdf`) for inclusion in the report and for external use (e.g., slides or Overleaf).  
  - The final report sources plotting functions from `source/` and saves all figures to this folder for reproducibility and organization.

Overall, this structure ensures that the simulation study is fully reproducible: raw simulation code is separated from generated results, and the final report is produced entirely by sourcing reusable functions and loading saved outputs.


## How to run (end-to-end)

1. Open the `.Rproj` in RStudio.
2. Install packages if needed:
   - `here`, `dplyr`, `tidyr`, `purrr`, `tibble`, `future.apply`, `parallelly`, `ggplot2`
3. Run the simulation:
   ```r
   source(here::here("simulations", "run_simulation.R"))
   ```
   This saves scenario-wise `.rds` files and a combined `data/combined_results.rds`.
4. Knit the report:
   - Open `analysis/final_report_hw2_Xinyu_Dong.Rmd`
   - Knit to PDF

## Notes on computation

Bootstrap-t uses a nested bootstrap (B=500 outer, B_inner=100 inner), so it can be slow,
especially for `n=500`. The simulation script parallelizes across the 18 scenarios.

*To accommendate for excessive computational time, I employed B=50 outer, B_inner=100 inner*
